<!doctype html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta name="google-site-verification" content="-N3hI20qkTl_n2JMxhDbb0QyU_2cNabwoXNrudeFYlc" />
    <meta property="og:title" content="Bungendore RFS" />
    <meta property="og:image" content="https://www.bungendorerfs.org/Images/linkPreview.png" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>Bungendore Volunteer Rural Fire Brigade</title>
    <!-- Link to Pico CSS for styling -->
    <link rel="stylesheet" href="https://unpkg.com/@picocss/pico@latest/css/pico.min.css" />
    <!-- Link to custom CSS file -->
    <link rel="stylesheet" href="css/main.css" />
    <link
      rel="stylesheet"
      href="https://unpkg.com/leaflet@1.9.4/dist/leaflet.css"
      integrity="sha256-p4NxAoJBhIIN+hmNHrzRCf9tD/miZyoHS5obTRR9BMY="
      crossorigin=""
    />
    <link
      rel="stylesheet"
      href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.15.4/css/all.min.css"
    />
    <link
      rel="stylesheet"
      href="https://cdn.jsdelivr.net/npm/@picocss/pico@2/css/pico.colors.min.css"
    />
    <link
      rel="stylesheet"
      href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.0.0-beta3/css/all.min.css"
    />

    <link rel="preconnect" href="https://fonts.googleapis.com" />
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin />
    <link
      href="https://fonts.googleapis.com/css2?family=Public+Sans:ital,wght@0,100..900;1,100..900&display=swap"
      rel="stylesheet"
    />

    <link rel="apple-touch-icon" sizes="180x180" href="/apple-touch-icon.png" />
    <link rel="icon" type="image/png" sizes="32x32" href="/favicon-32x32.png" />
    <link rel="icon" type="image/png" sizes="16x16" href="/favicon-16x16.png" />
    <link rel="manifest" href="/site.webmanifest" />
    <link rel="mask-icon" href="/safari-pinned-tab.svg" color="#5bbad5" />
    <meta name="msapplication-TileColor" content="#da532c" />
    <meta name="theme-color" content="#ffffff" />

    <script
      src="https://unpkg.com/leaflet@1.9.4/dist/leaflet.js"
      integrity="sha256-20nQCchB9co0qIjJZRGuk2/Z9VM+kNiyxNV1lvTlZBo="
      crossorigin=""
    ></script>
  </head>

  <body>
    <header id="siteHeader">
      <nav id="mainNav">
        <img src="/Images/logo.png" alt="Bungendore Rural Fire Brigade Logo" id="navLogo" />
        <!-- Updated alt text -->
        <ul>
          <li><a class="whiteText contrast" href="#info">Fire Information</a></li>
          <li><a class="whiteText contrast" href="#prepare">Prepare</a></li>
          <li><a class="whiteText contrast" href="#membership">Membership</a></li>
          <li><a class="whiteText contrast" href="#events">Events</a></li>
        </ul>
        <!-- Emergency Status Bar (Desktop/Tablet) -->
        <div id="emergencyStatusBar" class="emergency-status-bar">
          <div class="emergency-status-compact">
            <img class="status-icon" src="/Images/afdrs.png" alt="Fire danger rating sign" />
            <span class="status-text">
              <span id="statusBarDangerLevel">MODERATE</span>
              <span class="separator">|</span>
              <span id="statusBarIncidentCount">0 Incidents</span>
            </span>
          </div>
          <button
            id="expandEmergencyBtn"
            class="expand-emergency-btn"
            aria-label="View emergency details"
          >
            <i class="fas fa-chevron-down"></i>
          </button>
        </div>
        <!-- Mobile Emergency Badge -->
        <button
          id="mobileEmergencyBadge"
          class="mobile-emergency-badge"
          aria-label="View emergency information"
        >
          <i class="fas fa-fire"></i>
          <span id="mobileIncidentBadge" class="incident-badge">0</span>
        </button>
      </nav>
      <!-- Emergency Dashboard Overlay (Expanded State) -->
      <div id="emergencyDashboard" class="emergency-dashboard" hidden>
        <div class="emergency-dashboard-content">
          <button
            id="closeEmergencyDashboard"
            class="close-dashboard-btn"
            aria-label="Close emergency dashboard"
          >
            <i class="fas fa-times"></i>
          </button>
          <div class="dashboard-header">
            <span class="dashboard-icon">ðŸ”¥</span>
            <h3>Emergency Information</h3>
          </div>
          <div class="dashboard-body">
            <div class="dashboard-panel fire-danger-panel">
              <h4>Fire Danger Rating</h4>
              <div id="dashboardDangerLevel" class="danger-level-display">MODERATE</div>
              <p id="dashboardDangerMessage" class="danger-message">
                Plan and prepare for fires in your area
              </p>
            </div>
            <div class="dashboard-panel incidents-panel">
              <h4>Active Incidents</h4>
              <div id="dashboardIncidentCount" class="incident-count-display">0</div>
              <p class="incident-label">Current incidents in our area</p>
            </div>
          </div>
          <div class="dashboard-actions">
            <a href="#info" class="dashboard-action-btn">
              <i class="fas fa-map-marked-alt"></i>
              View Map
            </a>
            <a href="#prepare" class="dashboard-action-btn">
              <i class="fas fa-shield-alt"></i>
              Prepare Now
            </a>
          </div>
        </div>
      </div>
      <!-- Mobile Emergency Panel -->
      <div id="mobileEmergencyPanel" class="mobile-emergency-panel" hidden>
        <div class="mobile-panel-content">
          <div class="mobile-panel-header">
            <h4>Emergency Information</h4>
            <button
              id="closeMobilePanel"
              class="close-panel-btn"
              aria-label="Close emergency panel"
            >
              <i class="fas fa-times"></i>
            </button>
          </div>
          <div class="mobile-panel-body">
            <div class="mobile-danger-info">
              <span class="mobile-danger-label">Fire Danger:</span>
              <span id="mobileDangerLevel" class="mobile-danger-level">MODERATE</span>
            </div>
            <div class="mobile-incidents-info">
              <h5>Active Incidents:</h5>
              <div id="mobileIncidentsList" class="mobile-incidents-list">
                <p>Loading incident information...</p>
              </div>
            </div>
          </div>
          <div class="mobile-panel-actions">
            <a href="#info" class="mobile-action-btn">View Full Details</a>
            <a href="#info" class="mobile-action-btn secondary">View Map</a>
          </div>
        </div>
      </div>
    </header>

    <main class="container-fluid">
      <!-- Header section with navigation -->

      <!-- Hero section with main heading -->
      <div class="hero">
        <hgroup class="heading-background">
          <div id="heroLogo" class="logo"></div>
          <div>
            <h1>Bungendore Volunteer Rural Fire Brigade</h1>
            <p class="hero-cta">Stay Safe. Stay Informed.</p>
            <a href="#info" class="custom-button prominent-cta-button" role="button"
              >Get Fire Updates</a
            >
            <div class="button-container">
              <a
                target="_blank"
                rel="noopener"
                href="https://www.rfs.nsw.gov.au"
                class="custom-button"
                >RFS Website</a
              >
              <!-- Ensured consistency -->
              <button id="contactUsBtn" target="_blank" href="#" class="custom-button">
                Contact Us
              </button>
              <a
                target="_blank"
                rel="noopener"
                href="https://nswrfsprod.service-now.com/guardian_csp?id=guardian_index"
                class="custom-button"
                >Permits - Apply, Enquire, Notify</a
              >
              <a
                target="_blank"
                rel="noopener"
                href="https://shoutforgood.com/fundraisers/bungendoreruralfirebrigade"
                class="custom-button"
                >Donate</a
              >
              <a
                href="https://facebook.com/BungendoreRFS"
                target="_blank"
                rel="noopener"
                aria-label="Bungendore RFS Facebook Page"
                ><i class="fab fa-facebook social-icon"></i
              ></a>
              <a
                href="https://instagram.com/BungendoreRFS"
                target="_blank"
                rel="noopener"
                aria-label="Bungendore RFS Instagram Page"
                ><i class="fab fa-instagram social-icon"></i
              ></a>
            </div>
          </div>
        </hgroup>
      </div>

      <!-- Grid section with article cards -->
      <div class="container-fluid content-container">
        <!-- Fire Information Card - Full Width -->
        <div class="grid">
          <article class="summaryCard status-panel" id="fireInfoSummaryCard">
            <header class="red">
              <h3><i class="fas fa-fire"></i> Fire Information</h3>
              <a
                href="#info"
                class="header-action-icon"
                aria-label="Learn more about Fire Information"
                ><i class="fas fa-chevron-circle-right"></i
              ></a>
            </header>

            <div class="fire-info-compact">
              <div id="fireMessages" class="fire-messages-banner">
                <i class="fas fa-info-circle"></i>
                <span>Latest fire danger ratings and local incident updates.</span>
              </div>

              <div class="fire-info-grid-enhanced">
                <div class="fire-info-panel fire-danger-panel">
                  <div class="panel-header">
                    <i class="fas fa-thermometer-half"></i>
                    <h4>Fire Danger Rating</h4>
                  </div>
                  <div class="panel-content">
                    <div id="fireDangerRatingCell" class="data-value primary-metric">
                      Loading...
                    </div>
                    <p id="fireDangerMessage" class="data-label">
                      Fetching latest fire danger rating...
                    </p>
                  </div>
                </div>

                <div class="fire-info-panel incident-map-panel">
                  <div class="panel-header">
                    <i class="fas fa-map-marked-alt"></i>
                    <h4>Local Incidents Map</h4>
                  </div>
                  <div class="panel-content">
                    <div class="fire-info-map">
                      <div id="map"></div>
                      <div class="incident-summary" aria-live="polite">
                        <div class="incident-count">
                          <span id="incidentTotalCount">0</span> Incidents
                        </div>
                        <div id="incidentCountCell" class="incident-breakdown"></div>
                        <p id="incidentCountLabel" class="incident-label">
                          No active incidents in our area
                        </p>
                      </div>
                    </div>
                  </div>
                </div>
              </div>

              <div class="fire-info-actions">
                <a href="#info" class="quick-action-btn">
                  <i class="fas fa-map-marked-alt"></i>
                  View Map
                </a>
                <a href="#prepare" class="quick-action-btn">
                  <i class="fas fa-shield-alt"></i>
                  Prepare Now
                </a>
              </div>
            </div>
          </article>
        </div>

        <!-- Other Summary Cards - Grouped -->
        <div class="grid">
          <article class="summaryCard">
            <header class="amber">
              <h3>Prepare for Bushfires</h3>
              <a
                href="#prepare"
                class="header-action-icon"
                aria-label="Learn more about Preparing for Bushfires"
                ><i class="fas fa-chevron-circle-right"></i
              ></a>
            </header>
            <p>
              Bushfires are a real threat. Learn how to prepare your home, make a plan, and stay
              safe this fire season.
            </p>
          </article>
          <article class="summaryCard">
            <header class="blue">
              <h3>Membership</h3>
              <a
                href="#membership"
                class="header-action-icon"
                aria-label="Learn more about Membership"
                ><i class="fas fa-chevron-circle-right"></i
              ></a>
            </header>
            <p>
              Become a volunteer. Discover how you can contribute to protecting our community and
              learn new skills.
            </p>
          </article>
          <article class="summaryCard">
            <header class="lime">
              <h3>Community Events</h3>
              <a
                href="#events"
                class="header-action-icon"
                aria-label="Learn more about Community Events"
                ><i class="fas fa-chevron-circle-right"></i
              ></a>
            </header>
            <p>
              Get involved! Find out about upcoming community events, fundraisers, and brigade
              activities.
            </p>
          </article>
        </div>

        <!-- Tabbed Content Navigation -->
        <div class="content-tabs-container">
          <!-- Tab Navigation (Desktop/Tablet) -->
          <div class="tab-navigation" role="tablist">
            <button
              class="tab-btn active"
              role="tab"
              aria-selected="true"
              aria-controls="fire-info-tab"
              data-tab="fire-info"
            >
              <i class="fas fa-fire"></i>
              <span>Fire Information</span>
            </button>
            <button
              class="tab-btn"
              role="tab"
              aria-selected="false"
              aria-controls="prepare-tab"
              data-tab="prepare"
            >
              <i class="fas fa-shield-alt"></i>
              <span>Prepare</span>
            </button>
            <button
              class="tab-btn"
              role="tab"
              aria-selected="false"
              aria-controls="membership-tab"
              data-tab="membership"
            >
              <i class="fas fa-users"></i>
              <span>Membership</span>
            </button>
            <button
              class="tab-btn"
              role="tab"
              aria-selected="false"
              aria-controls="events-tab"
              data-tab="events"
            >
              <i class="fas fa-calendar-alt"></i>
              <span>Events</span>
            </button>
          </div>

          <!-- Tab Content Panels -->
          <div class="tab-content-container">
            <!-- Fire Information Tab -->
            <div
              class="tab-panel active"
              role="tabpanel"
              id="fire-info-tab"
              aria-labelledby="fire-info"
            >
              <div class="accordion-header mobile-only" data-accordion="fire-info">
                <i class="fas fa-fire"></i>
                <span>Fire Information</span>
                <i class="fas fa-chevron-down accordion-icon"></i>
              </div>
              <div class="accordion-content" data-content="fire-info">
                <!-- Detailed sections for each topic with responsive grid -->
                <article id="info">
                  <header class="red">
                    <h3>Fire Information in Our Area</h3>
                  </header>
                  <div class="">
                    <div id="fireDangerTableContainer"></div>
                    <div id="fireInfoContent"></div>
                    <div id="fireInfoTableContainer" class="grid-container"></div>
                  </div>
                </article>
              </div>
            </div>

            <!-- Prepare Tab -->
            <div class="tab-panel" role="tabpanel" id="prepare-tab" aria-labelledby="prepare">
              <div class="accordion-header mobile-only" data-accordion="prepare">
                <i class="fas fa-shield-alt"></i>
                <span>Prepare</span>
                <i class="fas fa-chevron-down accordion-icon"></i>
              </div>
              <div class="accordion-content" data-content="prepare">
                <article id="prepare">
                  <header class="amber">
                    <h3>Prepare for Bushfires</h3>
                  </header>
                  <div class="grid">
                    <div>
                      <div id="prepareContent"></div>
                    </div>
                    <div>
                      <div class="parallax-container">
                        <img
                          src="/Images/prepare.jpeg"
                          alt="Prepare for Bushfires"
                          class="parallax-image"
                        />
                      </div>
                      <p>
                        Bush fire is a part of life in New South Wales. So you need to live bush
                        fire ready. That means knowing your risk and having a plan for what to do
                        during a fire. You can make your plan online in as little as five minutes at
                        <a href="https://www.myfireplan.com.au" target="_blank" rel="noopener"
                          >www.myfireplan.com.au</a
                        >
                      </p>
                      <div id="BFDPContent"></div>
                      <a
                        href="https://nswrfsprod.service-now.com/guardian_csp?id=guardian_index"
                        target="_blank"
                        rel="noopener"
                        >Apply for a Fire Permit or Total Fire Ban exemption, notify us of a planned
                        burn, or to submit Fire Trails enquiries.</a
                      >
                    </div>
                  </div>
                </article>
              </div>
            </div>

            <!-- Membership Tab -->
            <div class="tab-panel" role="tabpanel" id="membership-tab" aria-labelledby="membership">
              <div class="accordion-header mobile-only" data-accordion="membership">
                <i class="fas fa-users"></i>
                <span>Membership</span>
                <i class="fas fa-chevron-down accordion-icon"></i>
              </div>
              <div class="accordion-content" data-content="membership">
                <article id="membership">
                  <header class="blue">
                    <h3>Membership</h3>
                  </header>
                  <div class="membership-grid">
                    <div id="membershipContent"></div>
                    <div id="membershipSection">
                      <h4>Upcoming Training Cutoff Dates</h4>
                      <div id="membershipCalendar" class="calendar-widget"></div>
                    </div>
                  </div>
                </article>
              </div>
            </div>

            <!-- Events Tab -->
            <div class="tab-panel" role="tabpanel" id="events-tab" aria-labelledby="events">
              <div class="accordion-header mobile-only" data-accordion="events">
                <i class="fas fa-calendar-alt"></i>
                <span>Events</span>
                <i class="fas fa-chevron-down accordion-icon"></i>
              </div>
              <div class="accordion-content" data-content="events">
                <article id="events">
                  <header class="lime">
                    <h3>Upcoming Events</h3>
                  </header>
                  <div class="grid">
                    <div>
                      <!-- <img src="https://bungendorerfs.org/images/events.jpg" alt="Community Events"> -->
                      <div id="eventsContent"></div>
                      <div class="parallax-container">
                        <img
                          src="/Images/communityEvent.jpeg"
                          alt="The brigade at the donation of the Black Summer Bungendore Fridge"
                          class="parallax-image"
                        />
                      </div>
                    </div>
                    <div id="communityEventsSection">
                      <h4>Community Events</h4>
                      <div id="communityEventsCalendar" class="calendar-widget"></div>
                    </div>
                  </div>
                </article>
              </div>
            </div>
          </div>
        </div>
      </div>
    </main>

    <footer id="footer">
      <article class="container-fluid grid" id="pageFoot">
        <article>
          <header>
            <strong>Bungendore Rural Fire Brigade</strong>
            <!-- Updated text -->
          </header>
          <div class="social-icon">
            <a
              href="https://facebook.com/BungendoreRFS"
              target="_blank"
              rel="noopener"
              aria-label="Bungendore RFS Facebook Page"
              ><i class="fab fa-facebook social-icon"></i
            ></a>
            <a
              href="https://instagram.com/BungendoreRFS"
              target="_blank"
              rel="noopener"
              aria-label="Bungendore RFS Instagram Page"
              ><i class="fab fa-instagram social-icon"></i
            ></a>
          </div>
        </article>
        <article id="stationCard">
          <header>
            <img src="/Images/station.png" alt="Station Icon" />
            <strong> Station</strong>
          </header>
          <p>28 King St<br />Bungendore NSW 2621</p>
        </article>
        <article>
          <header>
            <img src="/Images/mail.png" alt="Mail Icon" />
            <strong> Postal</strong>
          </header>
          <p>Box 23<br />Bungendore NSW 2621</p>
        </article>
        <article>
          <header>
            <img src="/Images/firefighter.png" alt="Mail Icon" />
            <strong> Hours</strong>
          </header>
          <p>
            7-8pm Friday, ex Public Holidays<br />The station is normally only manned during
            incidents.
          </p>
        </article>
        <!-- </div> -->
      </article>
    </footer>

    <!-- Modal -->
    <dialog id="contactModal">
      <article>
        <header>
          <button class="close" aria-label="Close" rel="prev"></button>
          <h2>Contact Us</h2>
        </header>
        <form id="contactForm">
          <label>If you'd like more information we can reach out to you</label>
          <fieldset>
            <input name="name" placeholder="Name" autocomplete="name" required />
            <input
              id="emailInput"
              type="email"
              name="email"
              placeholder="Email"
              autocomplete="email"
              required
            />
            <input name="phone" placeholder="Phone" autocomplete="tel" />
            <textarea
              name="message"
              placeholder="what would you like to know?"
              aria-label="What would you like to know?"
              required
            ></textarea>
            <!-- Honeypot field for spam prevention - hidden from users -->
            <input
              name="website"
              type="text"
              placeholder="Website"
              autocomplete="off"
              style="position: absolute; left: -9999px; width: 1px; height: 1px"
              tabindex="-1"
              aria-hidden="true"
            />
          </fieldset>
          <footer>
            <input id="submitButton" type="submit" value="Submit" />
          </footer>
        </form>
      </article>
    </dialog>

    <!-- Modal Structure -->
    <dialog id="eventModal">
      <article class="modal-content">
        <header>
          <button id="eventModalClose" class="close" aria-label="Close" rel="prev"></button>
          <h2><i class="fas fa-calendar-alt"></i> Event</h2>
        </header>
        <div id="modalEventContent"></div>
      </article>
    </dialog>
  </body>

  <!-- Include the marked library -->
  <script src="https://cdn.jsdelivr.net/npm/marked/marked.min.js"></script>
  <script src="https://cdnjs.cloudflare.com/ajax/libs/luxon/2.3.0/luxon.min.js"></script>
  <!-- Include the DOMPurify library -->
  <script src="https://cdnjs.cloudflare.com/ajax/libs/dompurify/2.3.4/purify.min.js"></script>

  <!-- Load my own scripts -->
  <script src="js/error-handler.js" defer></script>
  <script src="js/emergency-dashboard.js" defer></script>
  <script src="js/tabs-accordion.js" defer></script>
  <script src="js/main.js" defer></script>
  <script src="js/scroll.js" defer></script>
  <script src="js/map.js" defer></script>
  <script src="js/modal-utils.js" defer></script>
  <script src="js/calendar.js" defer></script>
  <script src="js/contact.js" defer></script>
  <script src="js/dynamicContent.js" defer></script>
</html>
